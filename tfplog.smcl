{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\github\Foodbi\tfplog.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}14 Sep 2023, 09:50:38
{txt}
{com}. /*
> ╔╗─────────╔═══╗╔╗────╔═══╗╔╗─────╔╗
> ║║─────────║╔══╝║║────║╔═╗╠╝╚╗───╔╝╚╗
> ║║──╔══╦══╗║╚══╦╣║╔══╗║╚══╬╗╔╬══╦╩╗╔╝
> ║║─╔╣╔╗║╔╗║║╔══╬╣║║║═╣╚══╗║║║║╔╗║╔╣║
> ║╚═╝║╚╝║╚╝║║║──║║╚╣║═╣║╚═╝║║╚╣╔╗║║║╚╗
> ╚═══╩══╩═╗║╚╝──╚╩═╩══╝╚═══╝╚═╩╝╚╩╝╚═╝
> ───────╔═╝║
> ───────╚══╝
> */
. cd "C:\github\foodbi" // Please change this to the proper working directory
{res}C:\github\foodbi
{txt}
{com}. 
. use "new_data/use/data0015.dta" // Pleace change this with the data in
{txt}
{com}. 
. xtset psid year
{res}
{col 1}{txt:Panel variable: }{res:psid}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:year}{txt:, }{res:{bind:2000}}{txt: to }{res:{bind:2015}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}. keep if disic2_4==10 // ISIC Rev. 4. For ISIC rev.3, 15
{txt}(4,985 observations deleted)

{com}. 
. gen cost=it1vcu+rdnvcu+rimvcu+efuvcu+eplvcu+enpvcu+zpdvcu+zndvcu
{txt}(1 missing value generated)

{com}. gen labshare=(zpdvcu+zndvcu)/cost
{txt}(1 missing value generated)

{com}. gen ln=log(zpdvcu+zndvcu)
{txt}(1 missing value generated)

{com}. gen lk=log(v1115)
{txt}(30,867 missing values generated)

{com}. gen lo=log(output)
{txt}
{com}. gen lm=log(rdnvcu+rimvcu)
{txt}(710 missing values generated)

{com}. gen ll=log(ltlnou)
{txt}
{com}. 
. save pakai,replace
{txt}{p 0 4 2}
(file {bf}
pakai.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
pakai.dta{rm}
saved
{p_end}

{com}. 
. prodest lo, free(ln) state(lk) proxy(lm) method(lp) fsresidual(om)
.{res}....


{txt}lp productivity estimator {col 49}Cobb-Douglas PF

Dependent variable: revenue{col 49}Number of obs      = {res}    52357
{txt}Group variable (id): psid{col 49}Number of groups   = {res}     8564
{txt}Time variable (t): year
{col 49}Obs per group: min = {res}        1
{col 49}{txt}               avg = {res}      6.1
{col 49}{txt}               max = {res}       15

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          lo{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}ln {c |}{col 14}{res}{space 2} .1907906{col 26}{space 2} .0051467{col 37}{space 1}   37.07{col 46}{space 3}0.000{col 54}{space 4} .1807033{col 67}{space 3}  .200878
{txt}{space 10}lk {c |}{col 14}{res}{space 2} .0543225{col 26}{space 2} .0026333{col 37}{space 1}   20.63{col 46}{space 3}0.000{col 54}{space 4} .0491613{col 67}{space 3} .0594836
{txt}{space 10}lm {c |}{col 14}{res}{space 2} .6647346{col 26}{space 2} .0065941{col 37}{space 1}  100.81{col 46}{space 3}0.000{col 54}{space 4} .6518103{col 67}{space 3} .6776589
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
Wald test on Constant returns to scale: Chi2 = 308.93
                                          p = (0.00)

{com}. outreg2 using "tfp1.xls",excel replace
{txt}{browse `"tfp1.xls"'}
{browse `"C:\github\foodbi"' :dir}{com} : {txt}{stata `"seeout using "tfp1.txt""':seeout}

{com}. 
. predict mu1,markups inputvar(ln)
{txt}(1 missing value generated)

{com}. predict mu2,markups inputvar(lm)
{txt}(710 missing values generated)

{com}. gen mu3=0.1887008/labshare
{txt}(2 missing values generated)

{com}. predict ,parameters
{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          lo{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}ln {c |}{col 14}{res}{space 2} .1907906{col 26}{space 2} .0051467{col 37}{space 1}   37.07{col 46}{space 3}0.000{col 54}{space 4} .1807033{col 67}{space 3}  .200878
{txt}{space 10}lk {c |}{col 14}{res}{space 2} .0543225{col 26}{space 2} .0026333{col 37}{space 1}   20.63{col 46}{space 3}0.000{col 54}{space 4} .0491613{col 67}{space 3} .0594836
{txt}{space 10}lm {c |}{col 14}{res}{space 2} .6647346{col 26}{space 2} .0065941{col 37}{space 1}  100.81{col 46}{space 3}0.000{col 54}{space 4} .6518103{col 67}{space 3} .6776589
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. predict tfp,omega
{txt}
{com}. 
. save tfp1, replace
{txt}{p 0 4 2}
(file {bf}
tfp1.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
tfp1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. 
. 
. import excel "C:\github\Foodbi\new_data\use\mf11krm.xlsx", sheet("Data") firstrow case(lower)
{res}{text}(53 vars, 38,332 obs)

{com}. destring year, replace
{txt}year: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}. xtset nobs year
{res}
{col 1}{txt:Panel variable: }{res:nobs}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:year}{txt:, }{res:{bind:2017}}{txt: to }{res:{bind:2021}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}. keep if disic2=="10"
{txt}(3,052 observations deleted)

{com}. gen cost=it1vcu+rdnvcu+rimvcu+efuvcu+eplvcu+enpvcu+zpdvcu+zndvcu
{txt}
{com}. gen labshare=(zpdvcu+zndvcu)/cost
{txt}
{com}. gen ln=log(zpdvcu+zndvcu)
{txt}(2 missing values generated)

{com}. gen lk=log(v1115)
{txt}(14,584 missing values generated)

{com}. gen lo=log(output)
{txt}
{com}. gen lm=log(rdnvcu+rimvcu)
{txt}(401 missing values generated)

{com}. gen ll=log(ltlnou)
{txt}
{com}. 
. prodest lo, free(ln) state(lk) proxy(lm) method(lp) fsresidual(om)
.{res}....


{txt}lp productivity estimator {col 49}Cobb-Douglas PF

Dependent variable: revenue{col 49}Number of obs      = {res}    20413
{txt}Group variable (id): nobs{col 49}Number of groups   = {res}     6288
{txt}Time variable (t): year
{col 49}Obs per group: min = {res}        1
{col 49}{txt}               avg = {res}      3.2
{col 49}{txt}               max = {res}        5

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          lo{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}ln {c |}{col 14}{res}{space 2} .3410782{col 26}{space 2} .0019383{col 37}{space 1}  175.97{col 46}{space 3}0.000{col 54}{space 4} .3372792{col 67}{space 3} .3448771
{txt}{space 10}lk {c |}{col 14}{res}{space 2} .0466191{col 26}{space 2} .0120687{col 37}{space 1}    3.86{col 46}{space 3}0.000{col 54}{space 4} .0229648{col 67}{space 3} .0702734
{txt}{space 10}lm {c |}{col 14}{res}{space 2} .5778495{col 26}{space 2} .0150051{col 37}{space 1}   38.51{col 46}{space 3}0.000{col 54}{space 4} .5484401{col 67}{space 3} .6072589
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
Wald test on Constant returns to scale: Chi2 = 1.58
                                          p = (0.21)

{com}. outreg2 using "tfp2.xls",excel replace
{txt}{browse `"tfp2.xls"'}
{browse `"C:\github\foodbi"' :dir}{com} : {txt}{stata `"seeout using "tfp2.txt""':seeout}

{com}. 
. predict mu1,markups inputvar(ln)
{txt}(2 missing values generated)

{com}. predict mu2,markups inputvar(lm)
{txt}(401 missing values generated)

{com}. gen mu3=.3410782 /labshare
{txt}(2 missing values generated)

{com}. predict ,parameters
{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          lo{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}ln {c |}{col 14}{res}{space 2} .3410782{col 26}{space 2} .0019383{col 37}{space 1}  175.97{col 46}{space 3}0.000{col 54}{space 4} .3372792{col 67}{space 3} .3448771
{txt}{space 10}lk {c |}{col 14}{res}{space 2} .0466191{col 26}{space 2} .0120687{col 37}{space 1}    3.86{col 46}{space 3}0.000{col 54}{space 4} .0229648{col 67}{space 3} .0702734
{txt}{space 10}lm {c |}{col 14}{res}{space 2} .5778495{col 26}{space 2} .0150051{col 37}{space 1}   38.51{col 46}{space 3}0.000{col 54}{space 4} .5484401{col 67}{space 3} .6072589
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. predict tfp,omega
{txt}
{com}. 
. save tfp2, replace
{txt}{p 0 4 2}
(file {bf}
tfp2.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
tfp2.dta{rm}
saved
{p_end}

{com}. 
. /*
> clear all
> use pakai
> levelsof disic3_4,local(ids)
> foreach i in `ids' {c -(}
>         clear all
>         use pakai
>         xtset psid year
>         keep if disic3_4==`i'
>         prodest lo, free(ln) state(lk) proxy(lm) method(lp) fsresidual(om)
>         predict tfp,omega
>         predict,parameters
>         predict mu1,markups inputvar(ln)
>         predict mu2,markups inputvar(lm)
>         save tfpb`i',replace
>         outreg2 using tfpb`i'.xls,replace se bdec(3) tdec(3) excel
> 
> {c )-}
> 
> 
> 
> ╔═══╗────╔╗────╔═╗╔╗─────────╔═══╗╔╗
> ║╔══╝────║║────║╔╝║║─────────║╔══╝║║
> ║╚══╦═╗╔═╝║╔══╦╝╚╗║║──╔══╦══╗║╚══╦╣║╔══╗
> ║╔══╣╔╗╣╔╗║║╔╗╠╗╔╝║║─╔╣╔╗║╔╗║║╔══╬╣║║║═╣
> ║╚══╣║║║╚╝║║╚╝║║║─║╚═╝║╚╝║╚╝║║║──║║╚╣║═╣
> ╚═══╩╝╚╩══╝╚══╝╚╝─╚═══╩══╩═╗║╚╝──╚╩═╩══╝
> ─────────────────────────╔═╝║
> ─────────────────────────╚══╝
> 
> 
> zipfile tfp*,saving(For_Krisnav1, replace)
> 
> local list: dir . files "tfp*"
> foreach f of local list {c -(}
>         erase "`f'"
> {c )-}
> */
. 
. log close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\github\Foodbi\tfplog.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}14 Sep 2023, 09:51:03
{txt}{.-}
{smcl}
{txt}{sf}{ul off}